{"remainingRequest":"C:\\Users\\Dmitrii\\Desktop\\MyGit\\web-prog-course\\lesson11\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Dmitrii\\Desktop\\MyGit\\web-prog-course\\lesson11\\frontend\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Dmitrii\\Desktop\\MyGit\\web-prog-course\\lesson11\\frontend\\src\\App.vue","mtime":1639749272829},{"path":"C:\\Users\\Dmitrii\\Desktop\\MyGit\\web-prog-course\\lesson11\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639481308762},{"path":"C:\\Users\\Dmitrii\\Desktop\\MyGit\\web-prog-course\\lesson11\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1639481310871},{"path":"C:\\Users\\Dmitrii\\Desktop\\MyGit\\web-prog-course\\lesson11\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639481308762},{"path":"C:\\Users\\Dmitrii\\Desktop\\MyGit\\web-prog-course\\lesson11\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1639481310727}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgSGVhZGVyIGZyb20gIi4vY29tcG9uZW50cy9IZWFkZXIiOw0KaW1wb3J0IE1pZGRsZSBmcm9tICIuL2NvbXBvbmVudHMvTWlkZGxlIjsNCmltcG9ydCBGb290ZXIgZnJvbSAiLi9jb21wb25lbnRzL0Zvb3RlciI7DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0FwcCcsDQogIGNvbXBvbmVudHM6IHsNCiAgICBGb290ZXIsDQogICAgTWlkZGxlLA0KICAgIEhlYWRlcg0KICB9LA0KICBkYXRhOiBmdW5jdGlvbiAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHVzZXI6IG51bGwsDQogICAgICBwb3N0czogW10sDQogICAgICB1c2VyczogW10NCiAgICB9DQogIH0sDQogIGJlZm9yZU1vdW50KCkgew0KICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0IikgJiYgIXRoaXMudXNlcikgew0KICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25Kd3QiLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0IikpOw0KICAgIH0NCg0KICAgIGF4aW9zLmdldCgiL2FwaS8xL3Bvc3RzIikudGhlbihyZXNwb25zZSA9PiB7DQogICAgICB0aGlzLnBvc3RzID0gcmVzcG9uc2UuZGF0YTsNCiAgICB9KTsNCg0KICAgIGF4aW9zLmdldCgiL2FwaS8xL3VzZXJzIikudGhlbihyZXNwb25zZSA9PiB7DQogICAgICB0aGlzLnVzZXJzID0gcmVzcG9uc2UuZGF0YTsNCiAgICB9KTsNCiAgfSwNCiAgYmVmb3JlQ3JlYXRlKCkgew0KICAgIHRoaXMuJHJvb3QuJG9uKCJvbkVudGVyIiwgKGxvZ2luLCBwYXNzd29yZCkgPT4gew0KICAgICAgaWYgKHBhc3N3b3JkID09PSAiIikgew0KICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkVudGVyVmFsaWRhdGlvbkVycm9yIiwgIlBhc3N3b3JkIGlzIHJlcXVpcmVkIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCg0KICAgICAgYXhpb3MucG9zdCgiL2FwaS8xL2p3dCIsIHsNCiAgICAgICAgbG9naW4sIHBhc3N3b3JkDQogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImp3dCIsIHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkp3dCIsIHJlc3BvbnNlLmRhdGEsICJvbkxvZ291dCIpOw0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkVudGVyVmFsaWRhdGlvbkVycm9yIiwgZXJyb3IucmVzcG9uc2UuZGF0YSk7DQogICAgICB9KTsNCiAgICB9KTsNCg0KICAgIHRoaXMuJHJvb3QuJG9uKCJvblJlZ2lzdGVyIiwgKG5hbWUsIGxvZ2luLCBwYXNzd29yZCkgPT4gew0KICAgICAgaWYgKHBhc3N3b3JkID09PSAiIikgew0KICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvblJlZ2lzdGVyVmFsaWRhdGlvbkVycm9yIiwgIlBhc3N3b3JkIGlzIHJlcXVpcmVkIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCg0KICAgICAgYXhpb3MucG9zdCgiL2FwaS8xL3VzZXJzIiwgew0KICAgICAgICBuYW1lLCBsb2dpbiwgcGFzc3dvcmQNCiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiand0IiwgcmVzcG9uc2UuZGF0YSk7DQogICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uSnd0IiwgcmVzcG9uc2UuZGF0YSwgIm9uUmVnaXN0ZXIiKTsNCiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25SZWdpc3RlclZhbGlkYXRpb25FcnJvciIsIGVycm9yLnJlc3BvbnNlLmRhdGEpOw0KICAgICAgfSk7DQogICAgfSk7DQoNCiAgICB0aGlzLiRyb290LiRvbigib25Kd3QiLCAoand0LCBlcnJvckV2ZW50KSA9PiB7DQogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiand0Iiwgand0KTsNCg0KICAgICAgYXhpb3MuZ2V0KCIvYXBpLzEvdXNlcnMvYXV0aCIsIHsNCiAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgand0DQogICAgICAgIH0NCiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLnVzZXIgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkNoYW5nZVBhZ2UiLCAiSW5kZXgiKTsNCiAgICAgIH0pLmNhdGNoKCgpID0+IHRoaXMuJHJvb3QuJGVtaXQoZXJyb3JFdmVudCkpDQogICAgfSk7DQoNCiAgICB0aGlzLiRyb290LiRvbigib25Mb2dvdXQiLCAoKSA9PiB7DQogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiand0Iik7DQogICAgICB0aGlzLnVzZXIgPSBudWxsOw0KICAgIH0pOw0KDQogICAgdGhpcy4kcm9vdC4kb24oIm9uV3JpdGVQb3N0IiwgKHRpdGxlLCB0ZXh0KSA9PiB7DQogICAgICBpZiAodGhpcy51c2VyID09PSBudWxsKSB7DQogICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uV3JpdGVQb3N0VmFsaWRhdGlvbkVycm9yIiwgIk5vIFVzZXIiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgbGV0IHVzZXJJZCA9IHRoaXMudXNlci5pZDsNCiAgICAgIGF4aW9zLnBvc3QoIi9hcGkvMS9wb3N0cyIsIHsNCiAgICAgICAgdGl0bGUsIHRleHQsIHVzZXJJZA0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIGF4aW9zLmdldCgiL2FwaS8xL3Bvc3RzIikudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgdGhpcy5wb3N0cyA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkNoYW5nZVBhZ2UiLCAiSW5kZXgiKTsNCiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25Xcml0ZVBvc3RWYWxpZGF0aW9uRXJyb3IiLCBlcnJvci5yZXNwb25zZS5kYXRhKTsNCiAgICAgIH0pOw0KICAgIH0pOw0KDQogICAgdGhpcy4kcm9vdC4kb24oIm9uQ29tbWVudCIsICh0ZXh0LCBwb3N0SWQpID0+IHsNCiAgICAgIGlmICh0aGlzLnVzZXIgPT09IG51bGwpIHsNCiAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25Db21tZW50VmFsaWRhdGlvbkVycm9yIiwgIk5vIFVzZXIiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgbGV0IHVzZXJJZCA9IHRoaXMudXNlci5pZDsNCiAgICAgIGF4aW9zLnBvc3QoIi9hcGkvMS9jb21tZW50Iiwgew0KICAgICAgICB0ZXh0LCB1c2VySWQsIHBvc3RJZA0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIGF4aW9zLmdldCgiL2FwaS8xL3Bvc3RzIikudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgdGhpcy5wb3N0cyA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIH0pOw0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkNvbW1lbnRWYWxpZGF0aW9uRXJyb3IiLCBlcnJvci5yZXNwb25zZS5kYXRhKTsNCiAgICAgIH0pOw0KICAgIH0pOw0KICB9DQp9DQo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <Header :user=\"user\"/>\r\n    <Middle :posts=\"posts\" :users=\"users\" :user:=\"user\"/>\r\n    <Footer/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Header from \"./components/Header\";\r\nimport Middle from \"./components/Middle\";\r\nimport Footer from \"./components/Footer\";\r\nimport axios from \"axios\"\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    Footer,\r\n    Middle,\r\n    Header\r\n  },\r\n  data: function () {\r\n    return {\r\n      user: null,\r\n      posts: [],\r\n      users: []\r\n    }\r\n  },\r\n  beforeMount() {\r\n    if (localStorage.getItem(\"jwt\") && !this.user) {\r\n      this.$root.$emit(\"onJwt\", localStorage.getItem(\"jwt\"));\r\n    }\r\n\r\n    axios.get(\"/api/1/posts\").then(response => {\r\n      this.posts = response.data;\r\n    });\r\n\r\n    axios.get(\"/api/1/users\").then(response => {\r\n      this.users = response.data;\r\n    });\r\n  },\r\n  beforeCreate() {\r\n    this.$root.$on(\"onEnter\", (login, password) => {\r\n      if (password === \"\") {\r\n        this.$root.$emit(\"onEnterValidationError\", \"Password is required\");\r\n        return;\r\n      }\r\n\r\n      axios.post(\"/api/1/jwt\", {\r\n        login, password\r\n      }).then(response => {\r\n        localStorage.setItem(\"jwt\", response.data);\r\n        this.$root.$emit(\"onJwt\", response.data, \"onLogout\");\r\n      }).catch(error => {\r\n        this.$root.$emit(\"onEnterValidationError\", error.response.data);\r\n      });\r\n    });\r\n\r\n    this.$root.$on(\"onRegister\", (name, login, password) => {\r\n      if (password === \"\") {\r\n        this.$root.$emit(\"onRegisterValidationError\", \"Password is required\");\r\n        return;\r\n      }\r\n\r\n      axios.post(\"/api/1/users\", {\r\n        name, login, password\r\n      }).then(response => {\r\n        localStorage.setItem(\"jwt\", response.data);\r\n        this.$root.$emit(\"onJwt\", response.data, \"onRegister\");\r\n      }).catch(error => {\r\n        this.$root.$emit(\"onRegisterValidationError\", error.response.data);\r\n      });\r\n    });\r\n\r\n    this.$root.$on(\"onJwt\", (jwt, errorEvent) => {\r\n      localStorage.setItem(\"jwt\", jwt);\r\n\r\n      axios.get(\"/api/1/users/auth\", {\r\n        params: {\r\n          jwt\r\n        }\r\n      }).then(response => {\r\n        this.user = response.data;\r\n        this.$root.$emit(\"onChangePage\", \"Index\");\r\n      }).catch(() => this.$root.$emit(errorEvent))\r\n    });\r\n\r\n    this.$root.$on(\"onLogout\", () => {\r\n      localStorage.removeItem(\"jwt\");\r\n      this.user = null;\r\n    });\r\n\r\n    this.$root.$on(\"onWritePost\", (title, text) => {\r\n      if (this.user === null) {\r\n        this.$root.$emit(\"onWritePostValidationError\", \"No User\");\r\n        return;\r\n      }\r\n      let userId = this.user.id;\r\n      axios.post(\"/api/1/posts\", {\r\n        title, text, userId\r\n      }).then(() => {\r\n        axios.get(\"/api/1/posts\").then(response => {\r\n          this.posts = response.data;\r\n        });\r\n        this.$root.$emit(\"onChangePage\", \"Index\");\r\n      }).catch(error => {\r\n        this.$root.$emit(\"onWritePostValidationError\", error.response.data);\r\n      });\r\n    });\r\n\r\n    this.$root.$on(\"onComment\", (text, postId) => {\r\n      if (this.user === null) {\r\n        this.$root.$emit(\"onCommentValidationError\", \"No User\");\r\n        return;\r\n      }\r\n      let userId = this.user.id;\r\n      axios.post(\"/api/1/comment\", {\r\n        text, userId, postId\r\n      }).then(() => {\r\n        axios.get(\"/api/1/posts\").then(response => {\r\n          this.posts = response.data;\r\n        });\r\n      }).catch(error => {\r\n        this.$root.$emit(\"onCommentValidationError\", error.response.data);\r\n      });\r\n    });\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n\r\n}\r\n</style>\r\n"]}]}